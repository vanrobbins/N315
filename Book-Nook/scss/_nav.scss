@use "colors" as *;
@use "shadows" as *;
nav {
	width: 100%;
	display: flex;
	justify-content: space-between;
	flex: 0 0 auto;
	border-bottom: 2px solid $color-border;
	padding: 1.375rem 4.1666% 0.8125rem 1.6666% !important;

	#nav-left a {
		display: flex;
		min-width: 12.5625rem;
		max-width: 10.4vw;
		align-items: center;
		gap: 1.5rem;
		text-decoration: none;
		color: $color-fg;
		/* Fluid margin: big on small screens, smoothly goes to 0 on large screens */
		margin-right: clamp(0rem, 2rem - 2vw, 2rem);
		#nav-logo {
			fill: $color-fg;
			height: 4.5rem;
			width: 4.5rem;
		}
		#nav-logo-text {
			padding-top: 1.375rem;
		}
	}
	#nav-center {
		display: flex;
		align-items: center;
		padding-top: 1.375rem;
		margin-right: 2.6vw;
		width: 31.5vw;
		height: 100%;
		#nav-search {
			// When any child (input or icon) is hovered/focused, change the icon color
			&:hover #search-icon,
			&:focus-within #search-icon {
				fill: $color-focus;
				transition: fill 200ms;
			}
			&:hover,
			&:focus-within {
				box-shadow: $shadow-combined;
			}
			display: flex;
			align-items: center;
			height: 2.75rem;
			padding-left: 0.2rem;
			width: 100%;
			gap: 0.5rem;
			background-color: $color-accent-muted;
			border: 1px solid $color-border;
			border-radius: 3px;
			transition: box-shadow ease-in-out 200ms;
			#search-icon {
				height: 2.5rem;
				width: 2.5rem;
				fill: $color-fg-muted;
			}
			#search-bar {
				width: 100%;
				height: 95%;
				color: $color-fg-muted;
				background-color: transparent;
				border: none !important;
				margin-right: 0.5rem;
				outline: none !important;
				box-shadow: none !important;
				font-size: 1rem;
				transition: box-shadow 0.2s;
			}

			#search-bar:focus {
				outline: none !important;
				border: none !important;
				box-shadow: 0 0 0;
			}

			#search-bar:-webkit-autofill {
				border: none !important;
			}
		}
	}

	#nav-right {
		display: flex;
		min-width: 37.3vw;
		max-width: 44.75rem;
		justify-content: space-between;
		#nav-links {
			min-width: 21.875vw;
			margin-right: clamp(1.5rem, 3.4375vw, 4.125rem);
			display: flex;
			align-items: end;
			justify-content: space-between;
		}
		#nav-user {
			display: flex;
			align-items: end;
			gap: 2.3vw;
			.nav-btn {
				&:hover .link-text::after,
				.link-text:focus-visible::after,
				.link-text.active::after {
					width: 100%;
				}
				align-items: end;
				display: flex;
				#acct-text {
					margin-right: 0.5rem;
				}
			}
		}
		#nav-hamburger {
			display: none;
		}
		a {
			text-decoration: none;
			color: $color-fg;
		}
		.link-text {
			position: relative;
			padding-bottom: 1rem;
		}
		.link-text::after {
			margin-bottom: 1rem;
			content: "";
			position: absolute;
			height: 0.1rem;
			left: 0;
			bottom: -0.15rem;
			width: 0;
			background: $color-focus;
			transition: width ease-in-out 300ms;
		}
		.link-text:hover::after,
		.link-text:focus-visible::after,
		.link-text.active::after {
			width: 100%;
			outline: none !important;
			border: none !important;
			box-shadow: 0 0 0;
		}
		&.active {
			font-weight: 300;
		}
		.nav-icon {
			width: 3.125rem;
			height: 3.125rem;
			fill: $color-fg;
		}
	}
}
@media (max-width: 70rem) {
	.user-text {
		display: none;
	}
}
@media (max-width: 54rem) {
	nav {
		height: 5.8125rem;
		#nav-left {
			display: flex;
			align-items: end;
			a {
				min-width: 9.875rem;
				max-width: 20.7vw;
				gap: 0.5rem;
				#nav-logo {
					width: 2.8125rem;
					height: 2.8125rem;
				}
				#nav-logo-text {
					padding-top: 0.859375rem;
				}
			}
		}
		#nav-center {
			width: 39vw;
			#nav-search {
				height: 1.5rem;
				#search-icon {
					height: 1.3rem;
					width: 1.3rem;
				}
				#search-bar {
					font-size: 0.8125rem;
				}
			}
		}
		#nav-right {
			min-width: 11.8vw;
			max-width: 8.65625rem;
			justify-content: end;
			align-items: end;
			#nav-links {
				display: none;
			}
			#nav-user {
				display: none;
			}
			#nav-hamburger {
				display: flex;
				align-items: end;
				.nav-icon {
					height: 2.625rem;
					width: 2.625rem;
					margin-top: -0.333rem;
					margin-bottom: -0.2rem;
				}
				:hover {
					fill: $color-focus;
					cursor: pointer;
				}
			}
		}
	}
}
@media (max-width: 30rem) {
	nav {
		height: 3.4375rem;
		padding: 1.125rem 3vw 0.4375rem 4.1vw !important;
		#nav-left {
			a {
				min-width: 7.65rem;
				max-width: 31.3vw;
				margin-right: clamp(0rem, 0.5rem - 0.5vw, 0.5rem);
				gap: 0.4375rem;
				#nav-logo {
					width: 1.875rem;
					height: 1.875rem;
				}
				#nav-logo-text {
					font-size: 0.8125rem;
					padding-top: 0.573rem;
				}
			}
		}
		#nav-center {
			padding-top: 0.4375rem;
			width: 39vw;
			margin-right: clamp(0rem, 1rem - 1vw, 1rem);
			#nav-search {
				height: 1rem;
				#search-icon {
					height: 0.9rem;
					width: 0.9rem;
				}
				#search-bar {
					font-size: 0.6875rem;
				}
			}
		}
		#nav-right {
			min-width: 1.7vw;
			max-width: 4.15625rem;
			#nav-hamburger {
				align-items: center;
				.nav-icon {
					height: 1.875rem;
					width: 1.875rem;
					margin-bottom: -0.3rem;
				}
			}
		}
	}
}
